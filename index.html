<!DOCTYPE html>
<html>
<head>
    <title>文字识别</title>
    <style>
        /* 样式代码（与之前相同） */
    </style>
</head>
<body>
    <!-- 添加文件选择输入框 -->
    <input type="file" accept="C:\\Users\\admin\\Desktop\\code\\py_pic\\其他\\ohNo.jpg" id="fileInput">
    <button id="anaButton">分析</button>
    <canvas id="canvas" style="display: none;"></canvas>
    <div id="result">文字:</div>
    <script src='https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js'></script>

    <script>
        const fileInput = document.getElementById('fileInput');
        const anaButton = document.getElementById('anaButton');
        const canvas = document.getElementById('canvas');
        const resultDiv = document.getElementById('result');
        
        // 选择文件后触发文字识别
        anaButton.addEventListener('click', async () => {
            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                const image = new Image();
                image.src = URL.createObjectURL(file);

                image.onload = async () => {
                    canvas.width = image.width;
                    canvas.height = image.height;
                    const context = canvas.getContext('2d');
                    context.drawImage(image, 0, 0, canvas.width, canvas.height);

                    const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
                    const recognizedText = await performOCR(imageData);

                    resultDiv.textContent = recognizedText;
                };
            }
        });

        // 模拟文字识别的函数（与之前相同）
        async function performOCR(imageData) {
            try {
                const { data: { text } } = await Tesseract.recognize(imageData, 'eng', { logger: m => console.log(m) });
                return text;
            } catch (error) {
                return error;
            }
        }
    </script>
</body>
</html>
