<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LIFF App</title>
</head>

<body>
  <p id="os"><b>OS:</b></p>
  <p id="language"><b>Language:</b></p>
  <p id="version"><b>Version:</b></p>
  <img id="pictureUrl" />
  <p id="displayName"><b>displayName:</b></p>

  <button id="btnMsg" onclick="sendMsg()">Send Message</button>

  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    function createUniversalLink() { }
    async function shareMsg() { }
    function logOut() { }
    function closed() { }
    function getContext() { }
    async function scanCode() { }
    function openWindow() { }
    async function getFriendship() { }

    async function sendMsg() {

      const name = document.getElementById('name').value;
      liff.sendMessages([
        //推播訊息
        {
          type: 'text',
          text: name
        }
      ]);
    }


    async function getUserProfile() {
      const profile = await liff.getProfile();
      document.getElementById("pictureUrl").src = profile.pictureUrl;
      document.getElementById("userId").append(profile.userId);
      document.getElementById("displayName").append(profile.displayName);
      msg = profile.displayName;
      document.getElementById("statusMessage").append(profile.statusMessage);
    }

    //ดึงค่ามาdisplay
    function getEnvironment() {
      document.getElementById("os").append(liff.getOS()); //ใช้deviceอะไร
      document.getElementById("language").append(liff.getLanguage());
      document.getElementById("version").append(liff.getVersion());
      document.getElementById("accessToken").append(liff.getAccessToken());
      document.getElementById("isInClient").append(liff.isInClient()); //เปิดlineจากมือถือหรืออย่างอื่น

      if (liff.isInClient()) {
        document.getElementById("btnLogOut").style.display = "none";
      } else {
        document.getElementById("btnMsg").style.display = "none";
        document.getElementById("btnScanCode").style.display = "none";
        document.getElementById("btnClose").style.display = "none";
      }
    }

    async function main() {
      const init = await liff.init({ liffId: "2000402390-1Wm0v2ww" });
      getEnvironment();
      getUserProfile();
      // getContext()
      // getFriendship()
      // createUniversalLink()
    }
    main();
  </script>
</body>
</html>

