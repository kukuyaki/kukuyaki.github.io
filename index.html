<!DOCTYPE html>
<html>

<head>
    <title>take picture</title>
</head>

<body style="background-color: rgb(193, 113, 64);">
    <p>
        <label for="pho" style="font-size: 90px; background-color: rgb(194, 226, 227);">點此拍照</label>
        <input id="pho" type="file" capture="environment" accept="image/*" style="visibility: hidden;" />
    </p>
    <hr>
    <div id="result" style="font-size: 50px;">圖上文字:</div>
    <hr>
    <img id="Im_image" width="80%">
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/4.1.1/tesseract.min.js"></script>
    <script>
        const input = document.getElementById('pho');
        const img = document.getElementById('Im_image');
        const resultDiv = document.getElementById('result');
        input.addEventListener('change', handleFilesImage, false);
        resultDiv.textContent ="處理中...";
        function handleFilesImage() {
            const fileData = this.files;
            const reader = new FileReader();
            reader.addEventListener('load', file => {
                img.src = file.target.result;

                const { createWorker } = Tesseract;
                (async () => {
                    const worker = await createWorker({ logger: m => console.log(m), });;
                    await worker.loadLanguage('eng+chi_tra');
                    await worker.initialize('eng+chi_tra');
                    const { data: { text } } = await worker.recognize(file.target.result);
                    resultDiv.textContent ="圖上文字:\n" + text;
                    await worker.terminate();
                })();
            });
            reader.readAsDataURL(fileData[0]);
        }
    </script>
</body>

</html>
