<!DOCTYPE html>
<html lang="en">

<head>
    <title>Camera ddddw</title>
</head>

<body>
  <input id="pho" capture="environment" type="file" accept="image/*"/>

    <script>
        const captureButton = document.getElementById('captureButton');
const videoElement = document.getElementById('cameraPreview');

captureButton.addEventListener('click', async () => {
    try {
        const mediaStream = await navigator.mediaDevices.getUserMedia({ video: true });

        // 将摄像头视频流显示在 video 元素中
        videoElement.srcObject = mediaStream;
        videoElement.play();

        // 在拍照按钮点击时，获取当前视频帧作为图片
        const canvas = document.createElement('canvas');
        canvas.width = videoElement.videoWidth;
        canvas.height = videoElement.videoHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(videoElement, 0, 0, canvas.width, canvas.height);
        
        const capturedImageDataURL = canvas.toDataURL('image/jpeg');

        // 关闭摄像头视频流
        mediaStream.getTracks().forEach(track => track.stop());

        // 使用 capturedImageDataURL，例如显示在页面上或上传到服务器
        // ...
    } catch (error) {
        console.error('Error accessing camera:', error);
    }
});

    </script>
</body>

</html>




